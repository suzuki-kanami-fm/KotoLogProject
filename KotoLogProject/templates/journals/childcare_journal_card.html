{% load custom_filters %}
<div class="carousel-item active">
    <div class="card h-100">
        <div class="card-body">
            <h6 class="card-subtitle d-flex justify-content-between mb-3">
                <span>
                {% if journal.child.family == request.user.family %}
                    <span style="background-color: {{ journal.child.id|generate_hsl_color }}"  class="child-name">{{ journal.child.child_name }}</span>
                {% endif %}
                {% if journal.is_favorited %}
                <span>★</span>
                {% endif %}
                </span>
            
            {% if journal.user_id == request.user.id %}
            <input type="checkbox" name="selected_journals" value="{{ journal.id }}">
            {% endif %}
            </h6>
            {% if journal.image_url %}
            <img src="{{ journal.image_url.url }}" class="card-img-top" alt="Journal Image" style="max-height: 200px; object-fit: cover;">
            {% endif %}
            <h5 class="card-title mb-2 text-muted">{{ journal.title }}</h5>
            <p class="card-text card-context">{{ journal.content|truncatewords:20 }}</p>
            <p class="card-text"><small class="text-muted">作成者: {{ journal.user.account_name }}</small></p>
        </div>
        <div class="card-footer">
            <button class="btn btn-primary w-100" data-id="{{ journal.id }}" data-bs-toggle="modal" data-bs-target="#journalModal">詳細を見る</button>
        </div>
    </div>
</div>
